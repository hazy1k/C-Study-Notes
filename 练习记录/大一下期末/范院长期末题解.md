# 范院长期末题解

## 1. 以下程序运行的输出结果是：23

```c
#include <stdio.h>

int main()
{
    int a = 0, b = 2;

    switch(++a, a * b)
    {
        case 1:
            printf("1");
        case 2:
            printf("2");
        case 3:
            printf("3\n");
        break;
        default:
            printf("other");
    }
}
// 输出：23
// 分析如下：
// 1. 首先，a 自增，a = 1；
// 2. 然后，a * b 计算，a * b = 2；
// 3. 由于 a * b 等于 2，所以执行 case 2；
// 4. a 自增，a = 2；
// 5. 然后，a * b 计算，a * b = 4；
// 6. 由于 a * b 等于 4，所以执行 case 3；
// 7. 由于 case 3 已经执行完毕，所以程序结束。
// 8. 最后，程序输出 23。
```

## 2. 以下程序运行的输出结果是：1，2

```c
#include<stdio.h>

int main()
{
    int m = 1, n, i;
    for(i = 0; i < 5; i++)
    {
        int m = 1;
        m++;
        if(i == 4)
            n = m;
    }
    printf("%d, %d ", m, n);
}
// 输出：1, 2
```

![屏幕截图 2024 06 20 083832](https://img.picgo.net/2024/06/20/-2024-06-20-083832326bd3a589c6c416.png)

## 3. 下面程序运行的结果是：   4   6   8  10

```c
#include<stdio.h>

int main()
{
    int i, j, a[10];
    a[0] = 1;
    for(i = 0; i < 5; i++)
        for(j = i; j < 5; j++)
            a[j] = a[i] + 1;
    for(i = 1; i < 5; i++)
        printf("%4d", a[i]);
}
// 输出：4 6 8 10
```

## 4. 下面程序的运行结果是：1 2 3

```c
#include<stdio.h>

void fun(int k)
{
    int a = 0;
    a += k;
    printf("%2d", a);
}
int main()
{
    int k;
    for(k = 1; k <= 3; k++)
        fun(k);
}
// 输出：1 2 3
// 说明：fun()函数的作用是将传入的k值加1，并打印出来。在main()函数中，调用fun()函数3次，每次传入不同的k值。
// 输出结果为1 2 3，证明fun()函数的作用是正确的。
```

---

## 1. 下面程序的运行结果是9 11 10 9

```c
#include <stdio.h>
int main()
{
    int i, j, m, n;
    i = 8; j = 10;

    m = ++i;
    n = j++;

    printf("%d,%d,%d,%d\n", i, j, n, m);
}
// 输出： 9,11,10,9
// 分析如下：
// 1. i = 8, j = 10
// 2. m = ++i = 9, n = j++ = 10
// 3. printf("%d,%d,%d,%d\n", i, j, n, m);
// 输出 i = 9, j = 11, n = 10, m = 9
```

## 2. 下面程序运行的结果是1 2 3 4

```c
#include <stdio.h>
int main()
{
    int k = 1;
    switch(k)
    {
        case 1:
            printf("%d", k++);
        case 2:
            printf("%d", k++);
        case 3:
            printf("%d", k++);
        case 4:
            printf("%d", k++);
            break;
        default:
            printf("full!\n");
    }
}
// 输出：1234
// 分析如下：
// 首先，k=1，执行第一个case 1，输出1，然后k=2，执行第二个case 2，输出2，然后k=3，执行第三个case 3，输出3，然后k=4，执行第四个case 4，输出4，然后执行break语句，结束switch语句。
```

## 3. 下面程序的运行结果是56

```c
#include<stdio.h>

fun(int x)
{
    static int a = 3;
    a += x;
    return a;
}

int main()
{
    int k = 2, m = 1, n;
    n = fun(k);
    m = fun(m);

    printf("%d%d",n,m);
}
// 输出：56
// static为静态变量，在函数调用后，变量值不会丢失，下次调用时，变量值会恢复
// 所以，在函数调用后，变量a的值为3+2=5，再次调用时，变量a的值为5+1=6，所以输出56
```

## 4. 下面程序的运行结果是efgh

```c
#include <stdio.h>
#include <string.h>
char *fun(char *t)
{
    char *p = t;
    return p+strlen(t)/2;
}

int main()
{
    char *str="abcdefgh";
    str = fun(str);
    puts(str);
}
// 输出：efgh
// 说明：fun()函数的作用是将字符串t的中间位置的指针返回。在main()函数中，我们将字符串str的地址传递给fun()函数，并将返回值赋给str。由于fun()函数返回的是字符串t的中间位置的指针，所以str指向的就是字符串t的中间位置。最后，我们通过puts()函数输出字符串t的中间位置。
// 因此，输出结果为：efgh
```

---

## 1. 输出100以内能被3整除且个位数为6的所有整数

```c
// 输出100以内能被3整除且个位数为6的所有整数
#include <stdio.h>

int main()
{
    int i;
    for (i = 0; i < 100; i++) // 限制范围为100
    {
        if (i % 3 == 0 && i % 10 == 6) // 筛选条件为能被3整除且个位数为6
        {
            printf("%d\n", i);
        }
    }
    return 0;
}
```

## 2. 验证在7~2000之间的所有素数中存在这样的两个素数，它们的差恰好是1898

```c
#include <stdio.h>
#include <stdbool.h>

// 判断一个数是否为素数
bool is_prime(int num)
{
    if (num <= 1) return false; // 小于等于1的数不是素数
    if (num == 2) return true;  // 2是唯一的偶数素数
    if (num % 2 == 0) return false; // 排除所有偶数
    for (int i = 3; i * i <= num; i += 2)
    { // 检查从3到num的平方根之间的奇数
        if (num % i == 0) return false; // 如果能被整除，则不是素数
    }
    return true; // 通过所有检查，是素数
}

int main()
{
    int start = 7; // 起始值
    int end = 2000; // 结束值
    int diff = 1898; // 需要查找的素数对之间的差值
    bool found = false; // 标记是否找到满足条件的素数对

    for (int i = start; i <= end - diff; i++)
    { // 遍历从start到end-diff之间的数
        if (is_prime(i) && is_prime(i + diff))
        { // 检查当前数和加上差值后的数是否都为素数
            printf("找到一对素数: %d 和 %d\n", i, i + diff); // 输出找到的素数对
            found = true; // 标记已找到
        }
    }

    if (!found)
    { // 如果没有找到满足条件的素数对
        printf("未找到满足条件的素数对\n"); // 输出未找到的信息
    }

    return 0; // 程序结束
}
```

## 3. 输出1000之内的全部“完数”，要求每行输出5个，并统计完数的个数。一个数如果恰好等于它的因子之和，就称其为完数

```c
#include <stdio.h>

// 判断一个数是否为完数
int is_perfect_number(int num)
{
    if (num < 2)
    {
        return 0;
    }
    int factors_sum = 1;  // 1 is always a factor
    for (int i = 2; i * i <= num; i++)
    {
        if (num % i == 0)
        {
            factors_sum += i;
            if (i != num / i)
            {
                factors_sum += num / i;
            }
        }
    }
    return factors_sum == num;
}

int main()
{
    int count = 0;
    int line_count = 0;

    for (int num = 1; num <= 1000; num++)
    {
        if (is_perfect_number(num))
        {
            printf("%d ", num);
            count++;
            line_count++;
            if (line_count == 5)
            {
                printf("\n");
                line_count = 0;
            }
        }
    }

    printf("\nTotal perfect numbers: %d\n", count);

    return 0;
}

```

## 4. 编写程序，将输入的20名学生的成绩保存到数组中，求出其最高分、最低分及平均分

```c
#include <stdio.h>

int main() {
    float scores[20];
    float highest_score, lowest_score, average_score, sum = 0.0;

    // 提示用户输入20名学生的成绩
    printf("请输入20名学生的成绩：\n");
    for (int i = 0; i < 20; i++)
    {
        while (1)
        {
            printf("请输入第 %d 名学生的成绩: ", i + 1);
            if (scanf("%f", &scores[i]) == 1)
            {
                break;
            }
            else
            {
                // 清除输入缓冲区
                while (getchar() != '\n');
                printf("输入无效，请输入一个数字。\n");
            }
        }
    }

    // 初始化最高分和最低分
    highest_score = lowest_score = scores[0];

    // 计算最高分、最低分和总分
    for (int i = 0; i < 20; i++)
    {
        if (scores[i] > highest_score)
        {
            highest_score = scores[i];
        }
        if (scores[i] < lowest_score)
        {
            lowest_score = scores[i];
        }
        sum += scores[i];
    }

    // 计算平均分
    average_score = sum / 20;

    // 输出结果
    printf("最高分: %.2f\n", highest_score);
    printf("最低分: %.2f\n", lowest_score);
    printf("平均分: %.2f\n", average_score);

    return 0;
}

```
